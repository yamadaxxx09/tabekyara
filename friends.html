<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>ãƒ•ãƒ¬ãƒ³ãƒ‰ä¸€è¦§</title>
        <link href="https://fonts.googleapis.com/css2?family=Hachi+Maru+Pop&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="assets/common.css" />
        <link rel="stylesheet" href="assets/friends.css" />
    </head>
    <body>
    <div class="phone">
        <div class="screen">
        <header>
            <h1>ãƒ•ãƒ¬ãƒ³ãƒ‰</h1>
        </header>

        <main>
            <button class="add-btn" onclick="location.href='friend-search.html'">ï¼‹ å‹é”ã‚’ä½œã‚‹</button>
            <div class="friends-list" id="friendList"></div>
        </main>

        <footer class="nav">
            <button onclick="location.href='mypage.html'">ğŸ‘¤</button>
            <button>ğŸ‘•</button>
            <button onclick="location.href='main.html'">ğŸ </button>
            <button class="active" onclick="location.href='friends.html'">ğŸ‘¥</button>
            <button onclick="location.href='settings.html'">âš™ï¸</button>
        </footer>
        </div>
    </div>

    <script type="module">
        import { getFriends, removeFriend } from './assets/friends.js';

        document.addEventListener('DOMContentLoaded', () => {
        const list = document.getElementById('friendList');
        const friends = getFriends();

        if (friends.length === 0) {
            list.innerHTML = `
            <p class="empty">ã¾ã ãƒ•ãƒ¬ãƒ³ãƒ‰ãŒã„ã¾ã›ã‚“ ğŸ˜¢<br>ã€Œå‹é”ã‚’ä½œã‚‹ã€ã‹ã‚‰è¿½åŠ ã—ã¦ã¿ã‚ˆã†ï¼</p>
            `;
            return;
        }

        list.innerHTML = friends.map(f => `
        <div class="friend-card" onclick="location.href='friend-detail.html?id=${f.id}'">
            <img src="${f.img}" alt="${f.name}" />
            <p>${f.name}</p>
        </div>
        `).join('');


        // âŒ å‰Šé™¤ãƒœã‚¿ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ²
        document.querySelectorAll('.remove-btn').forEach(btn => {
            btn.addEventListener('click', e => {
            e.stopPropagation(); // ã‚«ãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚¯ã¨é‡ãªã‚‰ãªã„ã‚ˆã†ã«
            const id = btn.dataset.id;

        // âœ… ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¿½åŠ 
        const confirmDelete = confirm(`æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼ŸğŸ˜¢`);
        if (!confirmDelete) return;

            removeFriend(id);
            alert('ãƒ•ãƒ¬ãƒ³ãƒ‰ã‚’å‰Šé™¤ã—ã¾ã—ãŸ');
            location.reload(); // å†èª­ã¿è¾¼ã¿ã§åæ˜ 
            });
        });
        });
    </script>


</body>
</html>
