<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ãƒ•ãƒ¬ãƒ³ãƒ‰ã‚’æ¢ã™</title>
    <link href="https://fonts.googleapis.com/css2?family=Hachi+Maru+Pop&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/common.css" />
    <link rel="stylesheet" href="assets/friends.css" />
    <script type="module">
        import { addFriend } from './assets/friends.js';

        // æ¶ç©ºã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§
        const mockUsers = [
        { id: "k_yuki129", name: "ã‚†ã", pet: "ğŸ±", img: "assets/img/pet1.jpg" },
        { id: "a_haru34", name: "ã¯ã‚‹", pet: "ğŸ¶", img: "assets/img/pet2.jpg" },
        { id: "n_mika55", name: "ã¿ã‹", pet: "ğŸ°", img: "assets/img/pet3.jpg" },
        ];

        document.addEventListener("DOMContentLoaded", () => {
        const searchBtn = document.getElementById("searchBtn");
        const input = document.getElementById("friendId");
        const result = document.getElementById("resultArea");
        const requestBtn = document.getElementById("requestBtn");

        let selectedUser = null;

        // ğŸ” æ¤œç´¢å‡¦ç†
        searchBtn.addEventListener("click", () => {
            const keyword = input.value.trim();
            result.innerHTML = "";
            selectedUser = null;

            if (!keyword) {
            result.innerHTML = `<p>ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>`;
            return;
            }

            const found = mockUsers.find(u => u.id === keyword);
            if (found) {
            selectedUser = found;
            result.innerHTML = `
                <div class="friend-card result">
                <img src="${found.img}" alt="${found.name}" />
                <p>${found.name} (${found.id})</p>
                <p>${found.pet}</p>
                </div>`;
            requestBtn.disabled = false;
            } else {
            result.innerHTML = `<p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>`;
            requestBtn.disabled = true;
            }
        });

        // âœ‰ï¸ ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡ï¼ˆå®Ÿéš›ã¯ãƒ•ãƒ¬ãƒ³ãƒ‰è¿½åŠ ï¼‰
        requestBtn.addEventListener("click", () => {
            if (selectedUser) {
            addFriend(selectedUser);
            alert(`${selectedUser.name} ã•ã‚“ã‚’ãƒ•ãƒ¬ãƒ³ãƒ‰ã«è¿½åŠ ã—ã¾ã—ãŸï¼`);
            location.href = "friends.html";
            }
        });
        });
    </script>
</head>

    <body>
    <div class="phone">
        <div class="screen">
        <header>
            <h1>ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒšãƒ¼ã‚¸</h1>
        </header>

        <main>
            <div class="center-box">
            <button class="btn" onclick="location.href='friends.html'">ğŸ‘¥ æˆ»ã‚‹</button>

            <div class="search-box card">
                <h2>ãƒ•ãƒ¬ãƒ³ãƒ‰ã‚’æ¢ãã†ï¼</h2>
                <div class="input-row">
                <input type="text" id="friendId" placeholder="user ID: ä¾‹ k_yuki129" />
                <button id="searchBtn" class="search-icon">ğŸ”</button>
                </div>
                <div id="resultArea" class="result-box"></div>
                <button id="requestBtn" class="btn wide" disabled>ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹</button>
            </div>
            </div>
        </main>

        <footer class="nav">
            <button onclick="location.href='mypage.html'">ğŸ‘¤</button>
            <button>ğŸ‘•</button>
            <button onclick="location.href='main.html'">ğŸ </button>
            <button class="active" onclick="location.href='friends.html'">ğŸ‘¥</button>
            <button onclick="location.href='settings.html'">âš™ï¸</button>
        </footer>
        </div>
    </div>
</body>
</html>
