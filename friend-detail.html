<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ãƒ•ãƒ¬ãƒ³ãƒ‰è©³ç´°</title>
    <link href="https://fonts.googleapis.com/css2?family=Hachi+Maru+Pop&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/common.css" />
    <link rel="stylesheet" href="assets/friends.css" />
    <script type="module">
        import { getFriends, removeFriend } from './assets/friends.js';

        document.addEventListener('DOMContentLoaded', () => {
        const params = new URLSearchParams(location.search);
        const friendId = params.get('id');
        const friend = getFriends().find(f => f.id === friendId);

        const detail = document.getElementById('detail');

        if (!friend) {
            detail.innerHTML = `<p>ãƒ•ãƒ¬ãƒ³ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>`;
            return;
        }

        detail.innerHTML = `
        <div class="friend-detail-card">
            
            <h2>${friend.name}</h2>
            <p>IDï¼š${friend.id}</p>
            

            <div class="pet-section">
            <h3>ãƒšãƒƒãƒˆ</h3>
            <img src="assets/img/ponta.png" alt="ãƒšãƒƒãƒˆ" class="pet-img" />
            </div>

            <button id="deleteBtn" class="btn danger">âŒ ãƒ•ãƒ¬ãƒ³ãƒ‰å‰Šé™¤</button>
            <button id="backBtn" class="btn">ğŸ‘¥ æˆ»ã‚‹</button>
        </div>
        `;


        // ğŸ”™ æˆ»ã‚‹ãƒœã‚¿ãƒ³
        document.getElementById('backBtn').addEventListener('click', () => {
            location.href = 'friends.html';
        });

        // âŒ å‰Šé™¤ãƒœã‚¿ãƒ³
        document.getElementById('deleteBtn').addEventListener('click', () => {
            const confirmDelete = confirm(`ã€Œ${friend.name}ã€ã•ã‚“ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`);
            if (!confirmDelete) return;

            removeFriend(friend.id);
            alert(`ã€Œ${friend.name}ã€ã•ã‚“ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚`);
            location.href = 'friends.html';
        });
        });
    </script>
</head>

    <body>
    <div class="phone">
        <div class="screen">
        <header>
            <h1>ãƒ•ãƒ¬ãƒ³ãƒ‰è©³ç´°</h1>
        </header>

        <main>
            <div id="detail" class="center-box"></div>
        </main>

        <footer class="nav">
            <button onclick="location.href='mypage.html'">ğŸ‘¤</button>
            <button onclick="location.href='accessory.html'">ğŸ‘•</button>
            <button onclick="location.href='main.html'">ğŸ </button>
            <button class="active" onclick="location.href='friends.html'">ğŸ‘¥</button>
            <button onclick="location.href='settings.html'">âš™ï¸</button>
        </footer>
        </div>
    </div>
</body>
</html>
